<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Integração PayPal com Yuno — SDK Lite, SDK Full e Direct API</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #ffffff;
      --surface: #f8f9fa;
      --border: #e2e8f0;
      --text: #1e293b;
      --text-muted: #64748b;
      --accent: #6366f1;
      --accent-dark: #4f46e5;
      --blue: #2563eb;
      --purple: #7c3aed;
      --teal: #0d9488;
      --amber: #d97706;
      --radius: 12px;
      --radius-sm: 8px;
      --code-bg: #1e1e1e;
      --code-border: #333;
      --code-text: #d4d4d4;
    }

    * { box-sizing: border-box; }

    body {
      font-family: 'DM Sans', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }

    .wrap {
      max-width: 820px;
      margin: 0 auto;
      padding: 2.5rem 1.5rem 4rem;
    }

    header {
      margin-bottom: 2.5rem;
      padding-bottom: 1.5rem;
      border-bottom: 2px solid var(--accent);
    }

    h1 {
      font-size: 1.75rem;
      font-weight: 700;
      margin: 0 0 0.5rem;
      letter-spacing: -0.02em;
      color: var(--accent-dark);
    }

    .subtitle {
      color: var(--text-muted);
      font-size: 0.95rem;
      margin: 0;
    }

    h2 {
      font-size: 1.25rem;
      font-weight: 600;
      margin: 2rem 0 1rem;
      color: var(--blue);
    }

    h3 {
      font-size: 1rem;
      font-weight: 600;
      margin: 1.25rem 0 0.5rem;
      color: var(--purple);
    }

    p {
      margin: 0 0 0.75rem;
      color: var(--text);
    }

    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-left: 4px solid var(--blue);
      border-radius: var(--radius);
      padding: 1.25rem 1.5rem;
      margin-bottom: 1rem;
    }

    .card.highlight {
      border-left-color: var(--accent);
      background: #eef2ff;
    }

    .card.highlight strong { color: var(--accent-dark); }

    .card.warning {
      border-left-color: var(--amber);
      background: #fffbeb;
    }

    .card.warning strong { color: #b45309; }

    .badge {
      display: inline-block;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 0.25rem 0.5rem;
      border-radius: var(--radius-sm);
      margin-bottom: 0.5rem;
    }

    .badge.lite { background: #dbeafe; color: #1d4ed8; }
    .badge.full { background: #ede9fe; color: #6d28d9; }
    .badge.api { background: #ccfbf1; color: #0f766e; }

    ul, ol { margin: 0 0 0.75rem; padding-left: 1.25rem; }
    li { margin-bottom: 0.35rem; color: var(--text); }

    /* Código inline (no parágrafo): sem caixa, cores estilo Cursor */
    code, .code {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9em;
      background: none;
      padding: 0;
      border: none;
      color: #0969da; /* propriedade/identificador */
    }
    code.c-fn, .code.c-fn { color: #0550ae; font-weight: 600; }  /* função/método */
    code.c-type, .code.c-type { color: #0a3069; }                 /* tipo/constante (ex: PAYPAL) */
    code.c-prop, .code.c-prop { color: #0969da; }                /* propriedade (redirect_url) */
    code.c-str, .code.c-str { color: #cf222e; }                  /* string/valor */
    code.c-sel, .code.c-sel { color: #953800; }                  /* seletor (#paypal-button) */

    /* Blocos de código: quadrante preto */
    pre {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      background: var(--code-bg);
      border: 1px solid var(--code-border);
      border-radius: var(--radius-sm);
      padding: 1rem 1.25rem;
      overflow-x: auto;
      margin: 0.75rem 0;
      line-height: 1.5;
    }

    pre code {
      background: none;
      padding: 0;
      color: var(--code-text);
      border: none;
      font-size: 1em;
    }

    /* Cores Cursor Dark nos quadrantes (syntax highlight) */
    pre code .hl-kw { color: #569cd6; }   /* keyword */
    pre code .hl-str { color: #ce9178; } /* string */
    pre code .hl-com { color: #6a9955; } /* comment */
    pre code .hl-num { color: #b5cea8; } /* number */
    pre code .hl-fn  { color: #dcdcaa; } /* function */
    pre code .hl-prop{ color: #9cdcfe; } /* property */
    pre code .hl-type{ color: #4ec9b0; } /* type/constant */

    .step {
      counter-increment: step;
      position: relative;
      padding-left: 2rem;
      margin-bottom: 0.75rem;
    }

    .step::before {
      content: counter(step);
      position: absolute;
      left: 0;
      width: 1.35rem;
      height: 1.35rem;
      border-radius: 50%;
      background: var(--accent);
      color: #fff;
      font-size: 0.75rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
    }

    .steps { counter-reset: step; }

    .note {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-top: 0.5rem;
    }

    a {
      color: var(--accent);
      text-decoration: none;
    }

    a:hover { text-decoration: underline; }

    footer {
      margin-top: 2.5rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border);
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    table strong { color: var(--text); }

    /* PDF: fundo branco, cores nas letras preservadas */
    body,
    .card, .card.highlight, .card.warning,
    .badge, .badge.lite, .badge.full, .badge.api,
    code, pre, .step::before {
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }
    @media print {
      body { background: #fff !important; }
      .card { background: #f8f9fa !important; border-color: #e2e8f0 !important; border-left-color: #2563eb !important; }
      .card.highlight { background: #eef2ff !important; border-left-color: #6366f1 !important; }
      .card.warning { background: #fffbeb !important; border-left-color: #d97706 !important; }
      h1 { color: #4f46e5 !important; }
      h2 { color: #2563eb !important; }
      h3 { color: #7c3aed !important; }
      code { background: transparent !important; border: none !important; }
      code.c-fn { color: #0550ae !important; }
      code.c-type { color: #0a3069 !important; }
      code.c-prop { color: #0969da !important; }
      code.c-str { color: #cf222e !important; }
      code.c-sel { color: #953800 !important; }
      pre { background: #1e1e1e !important; border-color: #333 !important; }
      pre code { color: #d4d4d4 !important; }
      pre code .hl-kw { color: #569cd6 !important; }
      pre code .hl-str { color: #ce9178 !important; }
      pre code .hl-com { color: #6a9955 !important; }
      pre code .hl-num { color: #b5cea8 !important; }
      pre code .hl-fn { color: #dcdcaa !important; }
      pre code .hl-prop { color: #9cdcfe !important; }
      pre code .hl-type { color: #4ec9b0 !important; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Integração PayPal com Yuno</h1>
      <p class="subtitle">SDK Lite, SDK Full e Direct API — guia técnico para programadores</p>
    </header>

    <p>
      O Yuno oferece várias formas de integrar pagamentos. O PayPal pode ser usado em todas elas, mas o <strong>fluxo e a implementação mudam</strong> conforme o tipo de integração. Este documento traz os trechos de código e os pontos exatos onde integrar em cada cenário.
    </p>

    <div class="card" style="margin-bottom: 1.5rem;">
      <strong>Referência rápida — onde integrar</strong>
      <ul style="margin-bottom: 0;">
        <li><strong>SDK Lite:</strong> HTML (container <code class="c-sel">#paypal-button</code>), JS (<code class="c-type">EXPRESS_METHODS</code>, filtro da lista, <code class="c-fn">mountExternalButtons</code>, <code class="c-fn">yunoCreatePayment</code> com redirect), Backend (POST /payments — branch PayPal com <code class="c-prop">workflow</code> + <code class="c-prop">callback_url</code>, normalizar <code class="c-prop">redirect_url</code> na resposta).</li>
        <li><strong>SDK Full:</strong> Frontend (<code class="c-fn">mountCheckout</code> + <code class="c-fn">yunoCreatePayment</code> tratando <code class="c-prop">redirect_url</code>), Backend (mesmo que Lite).</li>
        <li><strong>Direct API:</strong> Backend (POST <code class="c-str">/v1/checkout/sessions</code>, POST <code class="c-str">/v1/payments</code> com body PayPal), Frontend (chamar sua rota e redirecionar para <code class="c-prop">redirect_url</code>).</li>
      </ul>
    </div>

    <!-- ========== SDK LITE ========== -->
    <h2><span class="badge lite">SDK Lite</span> PayPal no Checkout Lite</h2>

    <div class="card warning">
      <strong>Restrição importante:</strong> o PayPal <strong>não é compatível com o checkout lite na lista de métodos</strong>. Se você tentar exibir PayPal na lista (“Ou pagar com”) e usar <code class="c-fn">mountCheckoutLite</code> para ele, a Yuno retorna erro do tipo “PAYPAL is not compatible with checkout lite”.
    </div>

    <h3>Solução: botão externo (recomendado)</h3>
    <p>Trate o PayPal como <strong>botão externo</strong>, igual Google Pay e Apple Pay: <code class="c-fn">mountExternalButtons</code> e <strong>não</strong> incluir PayPal na lista que usa <code class="c-fn">mountCheckoutLite</code>.</p>

    <h3>1. Onde integrar no HTML (SDK Lite)</h3>
    <div class="card">
      <p><strong>Container do botão PayPal</strong> — dentro da seção de pagamento expresso:</p>
      <pre><code>&lt;div id="express-section" style="display: none;"&gt;
  &lt;p&gt;Pagamento expresso&lt;/p&gt;
  &lt;div id="apple-pay" class="express-slot"&gt;&lt;/div&gt;
  &lt;div id="google-pay" class="express-slot"&gt;&lt;/div&gt;
  &lt;div id="paypal-button" class="express-slot"&gt;&lt;/div&gt;
&lt;/div&gt;</code></pre>
      <p><strong>Script do SDK</strong> — antes do fechamento de <code class="c-sel">&lt;/body&gt;</code>:</p>
      <pre><code>&lt;script src="https://sdk-web.y.uno/v1.5/main.js" defer&gt;&lt;/script&gt;</code></pre>
    </div>

    <h3>2. Onde integrar no JavaScript — Frontend (SDK Lite)</h3>
    <div class="card">
      <p><strong>Constante para excluir PayPal da lista</strong> (evitar que apareça em “Ou pagar com” e que seja montado com <code class="c-fn">mountCheckoutLite</code>):</p>
      <pre><code>const EXPRESS_METHODS = new Set(["APPLE_PAY", "GOOGLE_PAY", "PAYPAL", "PAYPAL_WALLET"]);</code></pre>
      <p><strong>Filtrar métodos ao montar a lista</strong> — ao popular a lista de payment methods, ignore os que estão em <code class="c-type">EXPRESS_METHODS</code>:</p>
      <pre><code>const regularMethods = methods.filter((m) => !EXPRESS_METHODS.has(m.type));
regularMethods.forEach((method) => {
  // adicionar option / item na lista; NUNCA incluir PAYPAL aqui
});</code></pre>
      <p><strong>Montar o botão PayPal</strong> — após <code class="c-fn">yuno.startCheckout({ ... })</code>, chamar:</p>
      <pre><code>await yuno.mountExternalButtons([
  { paymentMethodType: "GOOGLE_PAY", elementSelector: "#google-pay" },
  { paymentMethodType: "APPLE_PAY",  elementSelector: "#apple-pay"  },
  { paymentMethodType: "PAYPAL",     elementSelector: "#paypal-button" },
]);</code></pre>
      <p><strong>Tratar redirect no callback <code class="c-fn">yunoCreatePayment</code></strong> — ao receber a resposta do seu backend, se vier <code class="c-prop">redirect_url</code>, redirecionar e não chamar <code class="c-fn">continuePayment</code>:</p>
      <pre><code>async yunoCreatePayment(oneTimeToken) {
  const type = selectedPaymentMethod; // ou valor do select (PAYPAL quando veio do botão)
  const result = await createPayment({
    oneTimeToken,
    checkoutSession,
    paymentMethodType: type,
  });
  if (result && !result.error) {
    const redirectUrl = result.redirect_url
      || result.data?.redirect_url
      || result.payment_method?.redirect_url;
    if (redirectUrl) {
      window.location.href = redirectUrl;
      return;
    }
    yuno.continuePayment({ showPaymentStatus: true });
  }
}</code></pre>
      <p><strong>Chamada ao backend para criar pagamento</strong> (ex.: ao clicar em “Pagar” ou quando o SDK dispara o fluxo):</p>
      <pre><code>const result = await fetch("/payments", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    oneTimeToken,
    checkoutSession,
    paymentMethodType: "PAYPAL", // ou tipo retornado pelo SDK
  }),
}).then((r) => r.json());</code></pre>
    </div>

    <h3>3. Onde integrar no Backend (SDK Lite)</h3>
    <div class="card">
      <p><strong>Rota POST /payments</strong> — ao montar o body do payment para a API Yuno, detectar PayPal e setar <code class="c-prop">workflow</code> + <code class="c-prop">callback_url</code>:</p>
      <pre><code>const paymentMethodType = req.body.paymentMethodType || req.body.payment_method_type;
const isPayPal = paymentMethodType === "PAYPAL"
  || paymentMethodType === "PAYPAL_WALLET"
  || paymentMethodType === "PAY_PAL";

if (isPayPal) {
  payment.payment_method.type = "PAYPAL";
  payment.payment_method.detail = { paypal: {} };
  payment.workflow = "REDIRECT";
  payment.callback_url = process.env.BASE_URL
    ? `${process.env.BASE_URL.replace(/\/$/, "")}/payment-success?provider=paypal`
    : `${req.protocol}://${req.get("host")}/payment-success?provider=paypal`;
  payment.metadata = [
    { key: "payment_method", value: "paypal" },
    { key: "type", value: "wallet" },
  ];
}

const response = await createPayment(idempotencyKey, payment);</code></pre>
      <p><strong>Devolver <code class="c-prop">redirect_url</code> ao frontend</strong> — a API Yuno pode devolver a URL em vários caminhos; normalize para o front:</p>
      <pre><code>if (isPayPal && !response.redirect_url) {
  const pm = response.payment_method ?? response.data?.payment_method;
  const detail = pm?.payment_method_detail ?? pm?.detail;
  const wallet = detail?.wallet ?? detail?.paypal;
  response.redirect_url =
    response.data?.redirect_url
    ?? pm?.redirect_url
    ?? detail?.redirect_url
    ?? wallet?.redirect_url
    ?? detail?.paypal?.redirect_url
    ?? response.approval_url
    ?? response.checkout_url;
}
res.json(response);</code></pre>
    </div>

    <p class="note">
      Esse fluxo (PayPal sempre como botão externo no SDK Lite) é o recomendado e deve ser o mesmo independentemente da integração específica do cliente.
    </p>

    <!-- ========== SDK FULL ========== -->
    <h2><span class="badge full">SDK Full</span> PayPal no Full Checkout</h2>

    <p>
      No <strong>SDK Full</strong>, o Yuno gerencia a tela de checkout e a lista de métodos. O PayPal pode aparecer como opção na lista quando habilitado no dashboard e retornado nos payment methods da sessão.
    </p>

    <h3>1. Onde integrar no Frontend (SDK Full)</h3>
    <div class="card">
      <p><strong>Carregar e inicializar o SDK</strong>:</p>
      <pre><code>window.addEventListener('yuno-sdk-ready', async () => {
  const yuno = await Yuno.initialize(PUBLIC_API_KEY);
  await yuno.mountCheckout({
    checkoutSession,
    elementSelector: "#checkout-container",
    countryCode: "BR",
    currency: "BRL",
    language: "pt",
    yunoCreatePayment: async (oneTimeToken) => {
      const result = await fetch("/payments", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          oneTimeToken,
          checkoutSession,
          paymentMethodType: selectedMethod, // tipo escolhido pelo usuário (pode ser PAYPAL)
        }),
      }).then((r) => r.json());
      const redirectUrl = result.redirect_url ?? result.data?.redirect_url;
      if (redirectUrl) {
        window.location.href = redirectUrl;
        return;
      }
      yuno.continuePayment({ showPaymentStatus: true });
    },
  });
});
&lt;script defer src="https://sdk-web.y.uno/v1.5/main.js"&gt;&lt;/script&gt;</code></pre>
      <p><strong>Ponto importante:</strong> no Full SDK o PayPal pode vir na lista; quando o usuário escolher PayPal, o mesmo <code class="c-fn">yunoCreatePayment</code> é chamado. Seu backend deve identificar <code class="c-prop">paymentMethodType: "PAYPAL"</code> e devolver <code class="c-prop">redirect_url</code>; o front redireciona como no código acima.</p>
    </div>

    <h3>2. Backend (SDK Full)</h3>
    <p>Igual ao SDK Lite: na rota que cria o pagamento (ex.: POST <code class="c-str">/payments</code>), ao receber <code class="c-prop">paymentMethodType</code> igual a <code class="c-type">PAYPAL</code> / <code class="c-type">PAYPAL_WALLET</code>, montar o body com <code class="c-prop">payment_method.type = "PAYPAL"</code>, <code class="c-prop">payment_method.detail</code>, <code class="c-prop">workflow = "REDIRECT"</code> e <code class="c-prop">callback_url</code>, chamar a API Yuno Create Payment e repassar <code class="c-prop">redirect_url</code> na resposta ao front (veja trechos no bloco “Backend (SDK Lite)” acima).</p>

    <!-- ========== DIRECT API ========== -->
    <h2><span class="badge api">Direct API</span> PayPal via API direta (headless)</h2>

    <p>
      Na integração <strong>Direct API</strong> (headless) não há SDK de checkout: você monta a UI e chama apenas a API REST da Yuno. O fluxo do PayPal é controlado pelo seu front e backend.
    </p>

    <h3>1. Headers da API Yuno</h3>
    <div class="card">
      <p>Todas as chamadas à API Yuno usam:</p>
      <pre><code>headers: {
  "public-api-key": PUBLIC_API_KEY,   // da conta Yuno
  "private-secret-key": PRIVATE_SECRET_KEY,
  "Content-Type": "application/json",
}</code></pre>
      <p>Create Payment exige ainda:</p>
      <pre><code>"X-idempotency-key": idempotencyKey  // UUID único por tentativa</code></pre>
    </div>

    <h3>2. Onde integrar no Backend — Endpoints Yuno</h3>
    <div class="card">
      <p><strong>Criar Checkout Session</strong> (antes de criar o payment):</p>
      <pre><code>POST {API_URL}/v1/checkout/sessions
Body: {
  "account_id": "SEU_ACCOUNT_CODE",
  "merchant_order_id": "order-paypal-123",
  "payment_description": "Pagamento PayPal",
  "country": "BR",
  "customer_id": "UUID_DO_CUSTOMER",
  "amount": { "value": 2000, "currency": "BRL" }
}
// Resposta: checkout_session (ou id) — usar no Create Payment</code></pre>
      <p><strong>Criar Payment (PayPal REDIRECT)</strong>:</p>
      <pre><code>POST {API_URL}/v1/payments
Headers: + "X-idempotency-key": uuid.v4()

Body: {
  "description": "Descrição do pagamento",
  "account_id": "SEU_ACCOUNT_CODE",
  "merchant_order_id": "1655401222",
  "country": "BR",
  "amount": { "currency": "BRL", "value": 2000 },
  "checkout": { "session": "CHECKOUT_SESSION_ID" },
  "customer_payer": {
    "id": "CUSTOMER_ID",
    "billing_address": { "address_line_1": "...", "city": "...", "country": "BR", "state": "...", "zip_code": "..." },
    "document": { "document_type": "CPF", "document_number": "..." },
    "nationality": "BR"
  },
  "payment_method": {
    "type": "PAYPAL",
    "detail": { "paypal": {} }
  },
  "workflow": "REDIRECT",
  "callback_url": "https://seusite.com/payment-success?provider=paypal"
}</code></pre>
      <p>A resposta trará <code class="c-prop">redirect_url</code> (ou em <code class="c-prop">data.redirect_url</code> / <code class="c-prop">payment_method.redirect_url</code>). Seu backend deve devolver essa URL ao frontend.</p>
    </div>

    <h3>3. Rota do seu backend (Direct API)</h3>
    <div class="card">
      <p>Exemplo de rota que o front chama para “iniciar pagamento PayPal”; o backend cria sessão (se quiser), cria o payment na Yuno e devolve <code class="c-prop">redirect_url</code>:</p>
      <pre><code>app.post("/payments/paypal/redirect", async (req, res) => {
  const callbackUrl = `${BASE_URL}/payment-success?provider=paypal`;
  const sessionRes = await createCheckoutSession({
    account_id: ACCOUNT_CODE,
    merchant_order_id: `order-paypal-${Date.now()}`,
    country: "BR",
    customer_id: CUSTOMER_ID,
    amount: { value: req.body.amount ?? 2000, currency: "BRL" },
  });
  const checkoutSession = sessionRes.checkout_session ?? sessionRes.id;
  const payment = {
    account_id: ACCOUNT_CODE,
    merchant_order_id: sessionRes.merchant_order_id,
    country: "BR",
    amount: { currency: "BRL", value: req.body.amount ?? 2000 },
    checkout: { session: checkoutSession },
    customer_payer: { id: CUSTOMER_ID, /* ... endereço, document, nationality ... */ },
    payment_method: { type: "PAYPAL", detail: { paypal: {} } },
    workflow: "REDIRECT",
    callback_url: callbackUrl,
  };
  const response = await createPayment(uuid.v4(), payment);
  const redirectUrl = response.redirect_url ?? response.data?.redirect_url ?? response.payment_method?.redirect_url;
  res.json({ redirect_url: redirectUrl });
});</code></pre>
    </div>

    <h3>4. Onde integrar no Frontend (Direct API)</h3>
    <div class="card">
      <p>Botão “Pagar com PayPal” chama sua API e redireciona:</p>
      <pre><code>document.getElementById("btn-paypal").addEventListener("click", async () => {
  const res = await fetch("/payments/paypal/redirect", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ amount: 2000, currency: "BRL" }),
  });
  const data = await res.json();
  const url = data.redirect_url;
  if (url) {
    window.location.href = url;
  } else {
    console.error("Sem redirect_url", data);
  }
});</code></pre>
    </div>

    <div class="card highlight">
      <strong>Resumo Direct API — PayPal</strong>: (1) Backend cria Checkout Session e Payment na Yuno com <code class="c-prop">payment_method.type = "PAYPAL"</code>, <code class="c-prop">workflow = "REDIRECT"</code>, <code class="c-prop">callback_url</code>; (2) Backend devolve <code class="c-prop">redirect_url</code> ao front; (3) Front redireciona com <code class="c-fn">window.location.href = redirect_url</code>; (4) Usuário paga no PayPal e volta no <code class="c-prop">callback_url</code>; (5) Resultado definitivo via webhook Yuno.
    </div>

    <!-- ========== RESUMO ========== -->
    <h2>Resumo por tipo de integração</h2>
    <div class="card">
      <table style="width:100%; border-collapse: collapse;">
        <thead>
          <tr style="text-align: left; border-bottom: 1px solid var(--border);">
            <th style="padding: 0.5rem 0.75rem 0.5rem 0;">Integração</th>
            <th style="padding: 0.5rem 0.75rem;">PayPal na lista?</th>
            <th style="padding: 0.5rem 0.75rem;">Ação no front</th>
            <th style="padding: 0.5rem 0.75rem;">Backend</th>
          </tr>
        </thead>
        <tbody>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.75rem 0.75rem 0.75rem 0;"><strong>SDK Lite</strong></td>
            <td style="padding: 0.75rem;">Não (não compatível)</td>
            <td style="padding: 0.75rem;">Usar <code class="c-fn">mountExternalButtons</code> com <code class="c-type">PAYPAL</code> em um container dedicado; redirecionar se a resposta tiver <code class="c-prop">redirect_url</code>.</td>
            <td style="padding: 0.75rem;">Create Payment com type PAYPAL, workflow REDIRECT, callback_url; retornar redirect_url ao front.</td>
          </tr>
          <tr style="border-bottom: 1px solid var(--border);">
            <td style="padding: 0.75rem 0.75rem 0.75rem 0;"><strong>SDK Full</strong></td>
            <td style="padding: 0.75rem;">Sim (quando habilitado)</td>
            <td style="padding: 0.75rem;">Checkout montado pelo SDK; tratar redirect quando o backend devolver <code class="c-prop">redirect_url</code>.</td>
            <td style="padding: 0.75rem;">Create Payment com type PAYPAL, workflow REDIRECT, callback_url; retornar redirect_url ao front.</td>
          </tr>
          <tr>
            <td style="padding: 0.75rem 0.75rem 0.75rem 0;"><strong>Direct API</strong></td>
            <td style="padding: 0.75rem;">N/A (sua UI)</td>
            <td style="padding: 0.75rem;">Botão/link “PayPal” que chama seu backend e redireciona para o <code class="c-prop">redirect_url</code> retornado.</td>
            <td style="padding: 0.75rem;">Create Payment com type PAYPAL, workflow REDIRECT, callback_url; devolver redirect_url na resposta ao front.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <p>
      Em todos os casos, o backend deve usar <strong>workflow REDIRECT</strong> e <strong>callback_url</strong> para o PayPal, e o frontend deve redirecionar o usuário para o <code class="c-prop">redirect_url</code> quando a API retornar esse campo.
    </p>

    <footer>
      Documento para uso dos parceiros/merchants. Integração Yuno — PayPal (SDK Lite, SDK Full, Direct API).
    </footer>
  </div>

  <script>
    (function() {
      var blocks = document.querySelectorAll('pre code');
      var kw = /\b(const|let|var|async|await|if|else|return|new|try|catch|throw|for|in|of|while|function|=>|POST|GET|Body|Headers)\b/g;
      blocks.forEach(function(block) {
        var raw = block.textContent;
        var s = raw.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
        var stash = [];
        s = s.replace(/\/\/[^\n]*/g, function(m){ stash.push('<span class="hl-com">'+m+'</span>'); return '\u0001'+(stash.length-1)+'\u0001'; });
        s = s.replace(/\/\*[\s\S]*?\*\//g, function(m){ stash.push('<span class="hl-com">'+m+'</span>'); return '\u0001'+(stash.length-1)+'\u0001'; });
        s = s.replace(/"([^"\\]|\\.)*"/g, function(m){ stash.push('<span class="hl-str">'+m+'</span>'); return '\u0001'+(stash.length-1)+'\u0001'; });
        s = s.replace(/'([^'\\]|\\.)*'/g, function(m){ stash.push('<span class="hl-str">'+m+'</span>'); return '\u0001'+(stash.length-1)+'\u0001'; });
        s = s.replace(/`([^`\\]|\\.)*`/g, function(m){ stash.push('<span class="hl-str">'+m+'</span>'); return '\u0001'+(stash.length-1)+'\u0001'; });
        s = s.replace(/\b(PAYPAL|PAYPAL_WALLET|PAY_PAL|APPLE_PAY|GOOGLE_PAY|EXPRESS_METHODS|REDIRECT|CARD|BRL|USD|BR|CPF)\b/g, '<span class="hl-type">$1</span>');
        s = s.replace(/\b(redirect_url|callback_url|workflow|payment_method|checkout_session|paymentMethodType|oneTimeToken|elementSelector)\b/g, '<span class="hl-prop">$1</span>');
        s = s.replace(/\b([a-zA-Z_$][a-zA-Z0-9_$]*)\s*(?=\()/g, '<span class="hl-fn">$1</span> ');
        s = s.replace(kw, '<span class="hl-kw">$1</span>');
        s = s.replace(/\b(\d+\.?\d*)\b/g, '<span class="hl-num">$1</span>');
        for (var i = 0; i < stash.length; i++) s = s.replace('\u0001'+i+'\u0001', stash[i]);
        block.innerHTML = s;
      });
    })();
  </script>
</body>
</html>
